<div class="profile-header">
  <img src="/assets/icons/favicon.png" alt="Logo" class="logo">
  <h2>Profile Management</h2>
</div>

<nav class="profile-tabs">
  <a (click)="activeTab = 'account'" [class.active]="activeTab === 'account'">Account Security</a>
  <a (click)="activeTab = 'support'" [class.active]="activeTab === 'support'">Support</a>
  <a (click)="activeTab = 'devices'" [class.active]="activeTab === 'devices'">All Devices</a>
  <a (click)="toggleNotifications()">My Notifications</a>
</nav>

<div *ngIf="activeTab === 'account'">
  <form (submit)="onAccountSubmit($event)">
    <div class="input-group">
      <label for="username">Username:</label>
      <div class="input-wrapper">
        <input id="username" name="username" [value]="user?.username || ''" readonly>
      </div>
    </div>

    <div class="input-group">
      <label for="email">Email:</label>
      <div class="input-wrapper">
        <input id="email" name="email" [value]="user?.email || ''" [readonly]="!isEditing" type="email" required>
      </div>
    </div>

    <div class="input-group">
      <label for="subscription">Subscription:</label>
      <div class="input-wrapper">
        <input id="subscription" name="subscription" [value]="user?.subscription?.subscriptionName || ''" readonly>
      </div>
    </div>

    <div class="input-group" *ngIf="!isGoogleAccount">
      <label for="password">New Password:</label>
      <div class="input-wrapper">
        <input id="password" name="password" [disabled]="!isEditing" type="password">
      </div>
    </div>

    <div class="buttons">
      <a href="#" (click)="toggleEdit()" *ngIf="!isEditing" class="button-link">Edit Profile</a>
    </div>
  </form>
</div>

<div *ngIf="activeTab === 'support'">
  <h3>Support</h3>
  <a href="#" (click)="deleteAccount()" class="button-link delete-link">Delete Account</a>
</div>

<div *ngIf="activeTab === 'devices'">
  <h3>All Devices</h3>
  <a href="#" (click)="logoutFromAllDevices()" class="button-link">Log out from all devices</a>
</div>

<div *ngIf="errorMessage" class="errorMessage">{{ errorMessage }}</div>

<!-- Notifications Modal -->
<div *ngIf="showNotificationsModal" class="modal">
  <div class="modal-content">
    <h3>Notification Settings</h3>
    <label class="custom-checkbox">
      <input type="checkbox" [(ngModel)]="notifications.mobilePush">
      <span class="slider"></span>
      Mobile push notifications
    </label>
    <label class="custom-checkbox">
      <input type="checkbox" [(ngModel)]="notifications.emailAlways">
      <span class="slider"></span>
      Always send email notifications
    </label>
    <label class="custom-checkbox">
      <input type="checkbox" [(ngModel)]="notifications.emailDigest">
      <span class="slider"></span>
      Email digests
    </label>
    <div class="modal-actions">
      <button (click)="saveNotificationSettings()">Save</button>
      <button (click)="toggleNotifications()">Cancel</button>
    </div>
  </div>
</div>
